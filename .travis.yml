sudo: required

language: ruby

rvm:
  - 2.3.1

cache: bundler

cache:
  directories:
  - vendor/bundle

services:
  - docker

env:
  global:
    - secure: "UTe3zrxurF9CLmlU/L7floM77p3YV681D5N9NZDxmT9qnk4FaKIAp8Tp/FeNEw5pgigxSlHBhtFFs9M5Vwq7fyY7MTIBvGBvprGb1UgybxzRxx6eHgP6Z0+CMfEiDdnK4H6hgYUQLGZrDK/8oeZlvoCoMvr3koEIHLbftuiF4bxa4Hnc6/7T5wyUqsGhtnPN7Bjs04K+giJw/yyZX7DJZZc6+UWHAAGu/DQ8W6Hb/ov57adDedALBfSQ76LKoH+Q1NL6Njpnek7hdx+Vv1bXiYIP0+broazW4DAcBltTdQVNeA03HZEYb7i0C/38tiHDLi93VugUDCiVX6ykwvv4bH6QEY9rHqFqqSvc0niSYVfGu2JHqMss4/f8LkxDcjpdSWJNaMvOo/IyaFz/QuOR0ZwQIj4cwyd0SrWtxcPTKM72RWxgu6lv3o/0sjxUD6VFRXus8n0uFm0w81KDNWKQYXhBclfdBKbBDQE0ZazLB6Wk+UllccKRf23UMJMTQd5Fx88DjtOUMyKF5E80VnvROv8IVarh6QwkWc5KJ5FzajWY8oUL6cFw9CQtKxzTQoydLdMcCVkbDz3ZHM24jyh7pk/I72wKTtEwzjiJ7Y0P/FcCHQQXQH8ZlzoBMuzSoKGYwahxHCPKYgfi5hR7U7Q6wSkVB+mlFTJS7QYhTnQ719I="
    - secure: "NpyYmMfNqfIsxvOEVPbY8JSVui1/GE2LRN+sHxCJ+tIvMWHDZ1gEPUpBz48elK6bpXK/VFxh0c+L5hVcBCDB9Tmxsz2l19i5iaCT/ryb0vrSjQoc4SHIOF3Qrt65xryDjEIvuCNlHc5wXw2MMJmGtjC7M5cHo8tgc2nire/DzXBERScNPHxRc0BM2LyfZ8afvmz4IqZZdNXlSj8k5HK6IT8yv9rISRXuk2sGFvF3AEkIwFUN5tFKJj7qDg65n4/9/wMqDG/DNIe6fvQyolTW0QNFFIo3u9GkBoJhZBgFinpDEckWR3JjeHUj1wO8k6BxNhgn+EprJ/8kD5qULllp5o1oyhrhpJAvxdjbh5hRjiInHMrM9r4gb7V/EvotIwbGs2aiBMPh4dHUkluPjK4KLk3lwBzpFxzLxLTws1p43N9rAIF5nxITQko0Fj/UjepWOIuOpJzG/dI852HYun+YrAbHNzQnc40BEERooSZiZh43E5VsYYuZolw/yCasmHplaKFzGe9vKrfvgaMot1MUY9mGDFjBtIwFrgNQskSd+f4elvujSumWhrEK9Eozee/lZXlZyoYmNgex+dsbnR0qMCMGpy+9H+50W5UuouiW63adB8nyxTxl0eN2PH4Wc/I2uDQi/AtAWV3ZOQyvkMvUVbqXSufhcDSwteZtNH/g11o="

before_install:
  - docker pull kontena/etcd:2.3.7
  - docker run -d --net host --name etcd kontena/etcd:2.3.7

script:
  - bundle install --path vendor/bundle
  - bundle exec rspec spec/

deploy:
  - provider: script
    script: "$TRAVIS_BUILD_DIR/build/travis/deploy.sh"
    on:
      tags: true
      rvm: 2.3.1
      repo: kontena/kontena-docker-ipam-plugin
